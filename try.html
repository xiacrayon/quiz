<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡å°”æ²ƒåˆ©Â·æ–‡æ£®çš„è°ƒæ•™é—®å·</title>
    <style>
        :root {
            --vince-red: #8b0000;
            --xia-green: #6b8e23;
            --apple-red: #ff0800;
            --gold: #ffd700;
            --bg-dark: #1a1a1a;
        }

        body {
            background-color: var(--bg-dark);
            color: #e0e0e0;
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            width: 90%;
            background: #2a2a2a;
            padding: 20px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(139, 0, 0, 0.5);
            border: 2px solid var(--vince-red);
        }

        h1 {
            color: var(--vince-red);
            text-align: center;
            border-bottom: 2px solid var(--vince-red);
            padding-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            background: #333;
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .coin-count { color: var(--gold); }

        /* é—®å·æ ·å¼ */
        .question-card {
            display: none;
            animation: fadeIn 0.5s;
        }

        .question-card.active {
            display: block;
        }

        .options button {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: #444;
            color: white;
            border: 1px solid #555;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
            text-align: left;
        }

        .options button:hover {
            background: var(--vince-red);
            transform: translateX(5px);
        }

        /* ç›²ç›’ä¹å®«æ ¼ */
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
            display: none;
        }

        .blind-box {
            aspect-ratio: 1/1;
            background: #444;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
            border: 2px dashed var(--gold);
            font-size: 12px;
            text-align: center;
            padding: 5px;
        }

        .blind-box.opened {
            background: #222;
            border: 2px solid var(--vince-red);
            cursor: default;
        }

        /* ç‰¹æ•ˆ */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .final-reward {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            color: black;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            z-index: 100;
            box-shadow: 0 0 50px var(--apple-red);
        }

        .disclaimer {
            font-size: 0.8em;
            color: #888;
            margin-top: 20px;
            text-align: center;
        }

        .reward-item { font-size: 24px; }
    </style>
</head>
<body>

<div class="container" id="game-container">
    <h1>ğŸ· æ–‡æ£® & å¤å¤ ğŸ</h1>
    <div class="stats">
        <span>è¿›åº¦: <span id="current-q">1</span>/9</span>
        <span>é‡‘å¸: <span id="coins" class="coin-count">0</span> ğŸª™</span>
    </div>

    <div id="quiz-section"></div>

    <div id="box-section" style="display:none;">
        <h3 style="text-align:center; color: var(--gold);">æ­å–œï¼ä½¿ç”¨é‡‘å¸æŠ½å–ç›²ç›’å§</h3>
        <p style="text-align:center; font-size: 0.9em;">(ç‚¹å‡»ç›’å­æ¶ˆè€—1æšé‡‘å¸è§£é”)</p>
        <div class="grid" id="luck-grid" style="display: grid;"></div>
    </div>

    <div class="disclaimer">
        é™¤ç¨‹åºå¤–ä¸º AI å¸®å¿™ï¼Œå…¶ä½™æ–‡å­—å†…å®¹å‡ä¸ºä½œè€…æ’°å†™ã€‚
    </div>
</div>

<div id="final-modal" class="final-reward">
    âœ¨ å¤å¤ç»™ä½ OCç”»ç”»ï¼ âœ¨
</div>

<script>
    const questions = [
        { q: "æ–‡æ£®çš„ MBTI æ˜¯ï¼Ÿ", a: ["isfp", "infp", "esfp", "enfp"], correct: 0 },
        { q: "æ–‡æ£®ä¼šåšçš„äº‹æ˜¯å“ªä¸€ä»¶ï¼Ÿ", a: ["èººåœ¨é…’å§åœ°æ¿ä¸Š", "å½“ä¼—å‡ºç³—", "ç´§å¼ åˆ°å†…æ€¥", "ä»¥ä¸Šéƒ½æ˜¯"], correct: 3 },
        { q: "æ–‡æ£®ä¼šå¯¹å¤å¤åšçš„äº‹æ˜¯å“ªä¸€ä»¶ï¼Ÿ", a: ["é•¿æœŸä¸ç†å¤å¤", "åœ¨å¥¹é¢å‰å¦‚å•", "æ¶åŠ£æŒ‘é€—", "è‚†æ— å¿Œæƒ®æ”¾å±"], correct: 2 },
        { q: "å¤å¤çš„æ‰‹å›´å’Œè„šç ï¼Ÿ", a: ["17/37", "14/36", "20/44", "15/37"], correct: 1 },
        { q: "æ–‡æ£®è®¨åŒå¤å¤åšä»€ä¹ˆï¼Ÿ", a: ["ç”»æ–‡æ£®å‡ºç³—å›¾", "æš´æ‰“æ–‡æ£®", "ç›‘è€ƒæ–‡æ£®", "è´¬ä½è‡ªå·±"], correct: 3 },
        { q: "å¤å¤çš„ MBTI æ˜¯ï¼Ÿ", a: ["isfp", "infp", "esfp", "enfp"], correct: 1 },
        { q: "æ–‡æ£®å–œæ¬¢æŠ½çƒŸçš„ç‰Œå­ï¼Ÿ", a: ["éª†é©¼", "ä¸‡å®è·¯", "é•¿åŸ", "çˆ±å–œ"], correct: 1 },
        { q: "æ–‡æ£®å–œæ¬¢çš„é£Ÿç‰©ï¼Ÿ", a: ["é¸¡è‚‰", "ç‰›è‚‰", "ä¸‰æ–‡é±¼", "è¿™ä¸€å¤§é•¿ä¸²åŒ…å«ç« é±¼çƒ§æ‹‰é¢çš„å¥‡æ€ªæè¿°"], correct: 1 },
        { q: "æ–‡æ£®é•¿å¾—åƒä»€ä¹ˆï¼Ÿ", a: ["æ²ƒå°”ç›å¡‘æ–™è¢‹", "é¸¡å±è‚¡", "é‡‘å±é›¶ä»¶", "æ¶¦è‚¤ä¹³"], correct: 1 }
    ];

    // ä¸ºäº†ä¿æŒç¬¬8é¢˜çš„å¹½é»˜æ„Ÿï¼Œç‰¹æ®Šå¤„ç†é•¿æ–‡æœ¬
    questions[7].a[3] = "æ¤°å¥¶è”æå£å‘³èœœæ¡ƒå•µå•µé…è‰è“é…±å¥¶ç›–å¥¶èŒ¶é»‘ç³–çç å¤§å¥¶æ˜”é…èŠ’æœæ¨æç”˜éœ²é’æè¶…ç»è¥¿ç±³è„†ç”œå¯å£å¥½åƒè—»è“è›‹ç™½è‰è“ç‰‡å¥¶æ²¹å½©è‰²ç³–ç²’åšæœç¢å·§å…‹åŠ›é…±é¦™è•‰ç‰‡è–„è·å·§å…‹åŠ›å†°æ·‡æ·‹é…èŠ’æœé›ªèŠ­å¯ä¸½é¥¼é»‘æ¾éœ²å¥¶æ²¹é…±ç™½æ¾éœ²ç‰‡é…åˆ‡é”ä¸é©¬è‹é‡Œæ‹‰èŠå£«åŸ¹æ ¹èŒè‡é±¼å­é…±æ„å¤§åˆ©é€šå¿ƒç²‰é…è¿·è¿­é¦™ç•ªèŒ„åœŸè±†ç‚–è‚‰ä¸ç¾ä¹ƒæ»‹å¸•ç‘ªæ£®èŠå£«è„†ç»†è–¯æ¡ä¸ç‚¸æé²è‡ç‚™çƒ¤åšåˆ‡é¹…è‚ä¸çƒ¤ç‰å­èŠå£«çƒ§é¸Ÿçƒ¤ç‰›èˆŒä¸ç‰›è‚‰ç”Ÿç”œè™¾åˆºèº«ä¸èŸ¹è‚‰é…±çƒ§é³—é±¼æ¸©æ³‰è›‹å¯ä¹é¥¼çš„ç›–é¥­ä¸å¯¿å¸ç¢—å’ŒèŠå£«ç‰ç±³ç« é±¼çƒ§è±šéª¨å¤§æµ·è‹”æ‹‰é¢ã€‚";

    const rewards = [
        { n: "æ–‡æ£®çš„è°ƒé…’ç¬”è®°", e: "ğŸ“–" },
        { n: "å¤å¤çš„è‹¹æœæ±", e: "ğŸ§ƒ" },
        { n: "æ–‡æ£®çƒ¤çš„æ›²å¥‡(éš¾åƒ)", e: "ğŸª" },
        { n: "æ–‡æ£®è‡€éƒ¨ç²¾ç»†æ¨¡å‹", e: "ğŸ”§" },
        { n: "æ–‡æ£®çš„è…”è°ƒ", e: "ğŸ‘„" },
        { n: "å¤å¤ä¸‡å¹´ä¸å˜é»„æ¯›è¡£", e: "ğŸ‘•" },
        { n: "åˆ»äº†å¤å¤åå­—çš„é’»çŸ³æ¯", e: "ğŸ·" },
        { n: "æ–‡æ£®å·å–çš„å¥³ä»†è£…", e: "ğŸ‘—" },
        { n: "å¤å¤çš„èœ¡ç¬”ç›’", e: "ğŸ–ï¸" }
    ];

    let currentIdx = 0;
    let coins = 0;
    let openedBoxes = 0;

    function initQuiz() {
        const section = document.getElementById('quiz-section');
        questions.forEach((q, i) => {
            const card = document.createElement('div');
            card.className = `question-card ${i === 0 ? 'active' : ''}`;
            card.innerHTML = `
                <p><strong>é—®é¢˜ ${i+1}:</strong> ${q.q}</p>
                <div class="options">
                    ${q.a.map((opt, optIdx) => `<button onclick="checkAnswer(${i}, ${optIdx})">${opt}</button>`).join('')}
                </div>
            `;
            section.appendChild(card);
        });
    }

    window.checkAnswer = function(qIdx, choice) {
        if (choice === questions[qIdx].correct) {
            coins++;
            document.getElementById('coins').innerText = coins;
            alert("å›ç­”æ­£ç¡®ï¼è·å¾— 1 æšé‡‘å¸ ğŸª™");
        } else {
            alert("ç­”é”™äº†...æ–‡æ£®éœ²å‡ºäº†æ¶åŠ£çš„å˜²ç¬‘ã€‚");
        }

        const cards = document.querySelectorAll('.question-card');
        cards[qIdx].classList.remove('active');
        
        if (qIdx + 1 < questions.length) {
            currentIdx++;
            document.getElementById('current-q').innerText = currentIdx + 1;
            cards[qIdx+1].classList.add('active');
        } else {
            showBoxes();
        }
    };

    function showBoxes() {
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('box-section').style.display = 'block';
        const grid = document.getElementById('luck-grid');
        
        rewards.forEach((item, i) => {
            const box = document.createElement('div');
            box.className = 'blind-box';
            box.id = `box-${i}`;
            box.innerHTML = 'â“';
            box.onclick = () => openBox(i);
            grid.appendChild(box);
        });
    }

    window.openBox = function(i) {
        const box = document.getElementById(`box-${i}`);
        if (box.classList.contains('opened')) return;
        
        if (coins > 0) {
            coins--;
            openedBoxes++;
            document.getElementById('coins').innerText = coins;
            box.classList.add('opened');
            box.innerHTML = `<span class="reward-item">${rewards[i].e}</span><br>${rewards[i].n}`;
            
            if (openedBoxes === 9) {
                triggerFinalReward();
            }
        } else {
            alert("é‡‘å¸ä¸è¶³ï¼è°è®©ä½ ä¸å¤šäº†è§£ä¸€ä¸‹æ–‡æ£®ï¼Ÿ");
        }
    };

    function triggerFinalReward() {
        const modal = document.getElementById('final-modal');
        modal.style.display = 'block';
        
        // ç®€æ˜“çˆ†ç‚¸ç²’å­æ•ˆæœ
        for(let i=0; i<50; i++) {
            createParticle();
        }
    }

    function createParticle() {
        const p = document.createElement('div');
        p.style.position = 'fixed';
        p.style.left = '50%';
        p.style.top = '50%';
        p.style.width = '10px';
        p.style.height = '10px';
        p.style.backgroundColor = ['#ff0800', '#ffd700', '#ffffff'][Math.floor(Math.random()*3)];
        p.style.borderRadius = '50%';
        p.style.zIndex = '101';
        document.body.appendChild(p);

        const angle = Math.random() * Math.PI * 2;
        const velocity = Math.random() * 10 + 5;
        let x = 0;
        let y = 0;

        const anim = setInterval(() => {
            x += Math.cos(angle) * velocity;
            y += Math.sin(angle) * velocity;
            p.style.transform = `translate(${x}px, ${y}px)`;
            p.style.opacity = parseFloat(p.style.opacity || 1) - 0.02;
            if (p.style.opacity <= 0) {
                clearInterval(anim);
                p.remove();
            }
        }, 20);
    }

    initQuiz();
</script>

</body>
</html>